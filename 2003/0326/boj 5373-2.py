import sys
sys.stdin=open('../input.txt','r')
import sys
u=sys.stdin.readline;dic={'U':0,'D':1,'F':2,'B':3,'L':4,'R':5}
def r(a):
    a=dic[a]
    c[9*a],c[9*a+1],c[9*a+2],c[9*a+3],c[9*a+4],c[9*a+5],c[9*a+6],c[9*a+7],c[9*a+8]=\
        c[9*a+6],c[9*a+3],c[9*a],c[9*a+7],c[9*a+4],c[9*a+1],c[9*a+8],c[9*a+5],c[9*a+2]
def r2(a):
    if a=='U':
        c[29],c[28],c[27],c[47],c[46],c[45],c[20],c[19],c[18],c[38],c[37],c[36]=\
        c[38],c[37],c[36],c[29],c[28],c[27],c[47],c[46],c[45],c[20],c[19],c[18]
    if a=='D':
        c[24],c[25],c[26],c[51],c[52],c[53],c[33],c[34],c[35],c[42],c[43],c[44]=\
        c[42],c[43],c[44],c[24],c[25],c[26],c[51],c[52],c[53],c[33],c[34],c[35]
    if a=='F':
        c[6],c[7],c[8],c[45],c[48],c[51],c[11],c[10],c[9],c[44],c[41],c[38]=\
        c[44],c[41],c[38],c[6],c[7],c[8],c[45],c[48],c[51],c[11],c[10],c[9]
    if a=='B':
        c[2],c[1],c[0],c[36],c[39],c[42],c[15],c[16],c[17],c[53],c[50],c[47]=\
        c[53],c[50],c[47],c[2],c[1],c[0],c[36],c[39],c[42],c[15],c[16],c[17]
    if a=='L':
        c[0],c[3],c[6],c[18],c[21],c[24],c[9],c[12],c[15],c[35],c[32],c[29]=\
        c[35],c[32],c[29],c[0],c[3],c[6],c[18],c[21],c[24],c[9],c[12],c[15]
    if a=='R':
        c[8],c[5],c[2],c[27],c[30],c[33],c[17],c[14],c[11],c[26],c[23],c[20]=\
        c[26],c[23],c[20],c[8],c[5],c[2],c[27],c[30],c[33],c[17],c[14],c[11]
for _ in range(int(u())):
    c=['w']*9+['y']*9+['r']*9+['o']*9+['g']*9+['b']*9
    n=int(u())
    o=u().split()
    for i in o:
        a=i[0]
        if i[1]=='+':r(a);r2(a)
        else:r(a);r2(a);r(a);r2(a);r(a);r2(a)
    print(*c[0:3],sep="");print(*c[3:6],sep="");print(*c[6:9],sep="")